"use strict";(globalThis.webpackChunk_orca_so_whirlpools_docs=globalThis.webpackChunk_orca_so_whirlpools_docs||[]).push([[262],{1184:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>l});var r=i(4041);const o={},t=r.createContext(o);function s(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(t.Provider,{value:n},e.children)}},1919:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"Examples/CPI","title":"Cross-Program Invocation with Orca Whirlpools","description":"This guide provides an overview of how to integrate the Orca Whirlpools Program into your own on-chain Anchor Programs using Cross-Program Invocation (CPI).","source":"@site/docs/05-Examples/02-CPI.mdx","sourceDirName":"05-Examples","slug":"/Examples/CPI","permalink":"/Examples/CPI","draft":false,"unlisted":false,"editUrl":"https://github.com/orca-so/whirlpools/tree/main/docs/whirlpool/docs/05-Examples/02-CPI.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"CPI"},"sidebar":"sidebar","previous":{"title":"Send Tokens","permalink":"/Examples/Tour de Whirlpool/Send Tokens"},"next":{"title":"A Note for Python Devs","permalink":"/More Resources/A Note for Python Devs"}}');var o=i(1085),t=i(1184),s=i(8335);const l={sidebar_label:"CPI"},a="Cross-Program Invocation with Orca Whirlpools",c={},h=[{value:"Overview",id:"overview",level:2},{value:"Highlights",id:"highlights",level:3},{value:"Program Implementation Considerations",id:"program-implementation-considerations",level:2},{value:"Solana CLI and Anchor Version Compatibility",id:"solana-cli-and-anchor-version-compatibility",level:3},{value:"Important: Solana Program Dependency Patching",id:"important-solana-program-dependency-patching",level:3},{value:"Client Implementations",id:"client-implementations",level:2},{value:"Solana Kit Client",id:"solana-kit-client",level:3},{value:"Web3.js Client",id:"web3js-client",level:3},{value:"Important Note on Dependencies",id:"important-note-on-dependencies",level:3},{value:"Specific Use Case: Launchpad Integration",id:"specific-use-case-launchpad-integration",level:2},{value:"Getting Started",id:"getting-started",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"cross-program-invocation-with-orca-whirlpools",children:"Cross-Program Invocation with Orca Whirlpools"})}),"\n",(0,o.jsx)(n.p,{children:"This guide provides an overview of how to integrate the Orca Whirlpools Program into your own on-chain Anchor Programs using Cross-Program Invocation (CPI)."}),"\n",(0,o.jsx)(s.A,{item:{type:"link",href:"https://github.com/orca-so/whirlpools-cpi-examples",label:"Orca CPI Examples Repository",description:"https://github.com/orca-so/whirlpools-cpi-examples"}}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"The Orca CPI Examples repository offers a comprehensive toolkit for developers looking to integrate with Orca Whirlpools from their own Anchor programs. It includes examples for multiple Anchor versions and client-side implementations."}),"\n",(0,o.jsx)(n.h3,{id:"highlights",children:"Highlights"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["CPI examples for multiple Anchor versions:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"v0.29.0"}),"\n",(0,o.jsx)(n.li,{children:"v0.30.1"}),"\n",(0,o.jsx)(n.li,{children:"v0.31.0"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Client-side code for generating instruction data and account information using:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@solana/web3.js"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"@solana/kit"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:"Specific use case for Launchpad creators who want to graduate tokens from their bonding curve to Orca Whirlpools"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"program-implementation-considerations",children:"Program Implementation Considerations"}),"\n",(0,o.jsx)(n.h3,{id:"solana-cli-and-anchor-version-compatibility",children:"Solana CLI and Anchor Version Compatibility"}),"\n",(0,o.jsx)(n.p,{children:"Each Anchor version requires a specific Solana CLI version:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Anchor Version"}),(0,o.jsx)(n.th,{children:"Solana CLI Version"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"v0.29.0"}),(0,o.jsx)(n.td,{children:"v1.18.17"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"v0.30.1"}),(0,o.jsx)(n.td,{children:"v1.18.17"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"v0.31.0"}),(0,o.jsx)(n.td,{children:"v2.1.0"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"important-solana-program-dependency-patching",children:"Important: Solana Program Dependency Patching"}),"\n",(0,o.jsxs)(n.p,{children:["For Anchor versions 0.29.0 and 0.30.1, you ",(0,o.jsx)(n.strong,{children:"must patch"})," the ",(0,o.jsx)(n.code,{children:"solana-program"})," crate:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Why?"})," These Anchor versions rely on ",(0,o.jsx)(n.code,{children:"solana-program"})," crate < v2, while the Orca Whirlpools and Whirlpools SDK pull in ",(0,o.jsx)(n.code,{children:"solana-program"})," > v2, creating version conflicts."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Solution:"})," Apply the patch using:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cargo update solana-program@2.2.1 --precise 1.18.17\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["For Anchor version 0.31.0, ",(0,o.jsx)(n.strong,{children:"no patching is required"})," as it's compatible with ",(0,o.jsx)(n.code,{children:"solana-program"})," > v2."]}),"\n",(0,o.jsx)(n.h2,{id:"client-implementations",children:"Client Implementations"}),"\n",(0,o.jsx)(n.h3,{id:"solana-kit-client",children:"Solana Kit Client"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"@solana/kit"})," client leverages modern Solana SDK features with:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Automated Anchor client generation using Codama"}),"\n",(0,o.jsxs)(n.li,{children:["Integration with ",(0,o.jsx)(n.code,{children:"@orca-so/whirlpools"})," SDK for Whirlpools interactions"]}),"\n",(0,o.jsxs)(n.li,{children:["Test suite using ",(0,o.jsx)(n.code,{children:"Bankrun"})," for simulation without a local validator"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"web3js-client",children:"Web3.js Client"}),"\n",(0,o.jsxs)(n.p,{children:["The classic ",(0,o.jsx)(n.code,{children:"@solana/web3.js"})," implementation with Anchor provides:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Integration with Anchor for account management and instruction creation"}),"\n",(0,o.jsx)(n.li,{children:"Compatibility with the Whirlpools SDK"}),"\n",(0,o.jsx)(n.li,{children:"Testing framework using Vitest"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"important-note-on-dependencies",children:"Important Note on Dependencies"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"@orca-so/whirlpools-sdk"})," is dependent on Anchor v0.32.1. For other Anchor versions, the examples include ",(0,o.jsx)(n.code,{children:"resolutions"})," in the ",(0,o.jsx)(n.code,{children:"package.json"})," to manage dependency conflicts."]}),"\n",(0,o.jsx)(n.h2,{id:"specific-use-case-launchpad-integration",children:"Specific Use Case: Launchpad Integration"}),"\n",(0,o.jsx)(n.p,{children:"For Launchpad creators who want to graduate tokens from their bonding curve to Orca Whirlpools, a detailed implementation guide is available at:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://github.com/orca-so/orca-cpi-examples/blob/main/use-cases/Launchpad.md",children:"Launchpad Integration Guide"})}),"\n",(0,o.jsx)(n.p,{children:"This guide covers:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"How to configure and initialize Splash Pools (full-range CLMM pools)"}),"\n",(0,o.jsx)(n.li,{children:"Managing token mint ordering and price calculation"}),"\n",(0,o.jsx)(n.li,{children:"Position NFT ownership and fee collection opportunities"}),"\n",(0,o.jsx)(n.li,{children:"Complete integration process from bonding curve to Orca Whirlpools"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,o.jsx)(n.p,{children:"To get started with CPI integration with Orca Whirlpools:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Clone the example repository"}),"\n",(0,o.jsx)(n.li,{children:"Select the appropriate Anchor version for your project"}),"\n",(0,o.jsx)(n.li,{children:"Follow the setup instructions in the README"}),"\n",(0,o.jsx)(n.li,{children:"Explore the specific use cases in the repository"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The repository includes a ",(0,o.jsx)(n.code,{children:"run-tests.sh"})," script that automates all the setup and testing steps, making it easy to get started with CPI integration."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8335:(e,n,i)=>{i.d(n,{A:()=>b});var r=i(4041),o=i(4357),t=i(2436),s=i(8082),l=i(396);const a=["zero","one","two","few","many","other"];function c(e){return a.filter(n=>e.includes(n))}const h={locale:"en",pluralForms:c(["one","other"]),select:e=>1===e?"one":"other"};function d(){const{i18n:{currentLocale:e}}=(0,l.A)();return(0,r.useMemo)(()=>{try{return function(e){const n=new Intl.PluralRules(e);return{locale:e,pluralForms:c(n.resolvedOptions().pluralCategories),select:e=>n.select(e)}}(e)}catch(n){return console.error(`Failed to use Intl.PluralRules for locale "${e}".\nDocusaurus will fallback to the default (English) implementation.\nError: ${n.message}\n`),h}},[e])}function p(){const e=d();return{selectMessage:(n,i)=>function(e,n,i){const r=e.split("|");if(1===r.length)return r[0];r.length>i.pluralForms.length&&console.error(`For locale=${i.locale}, a maximum of ${i.pluralForms.length} plural forms are expected (${i.pluralForms.join(",")}), but the message contains ${r.length}: ${e}`);const o=i.select(n),t=i.pluralForms.indexOf(o);return r[Math.min(t,r.length-1)]}(i,n,e)}}var u=i(5436),m=i(9082),x=i(4441);const g={cardContainer:"cardContainer_S8oU",cardTitle:"cardTitle_HoSo",cardDescription:"cardDescription_c27F"};var j=i(1085);function v({href:e,children:n}){return(0,j.jsx)(t.A,{href:e,className:(0,o.A)("card padding--lg",g.cardContainer),children:n})}function f({href:e,icon:n,title:i,description:r}){return(0,j.jsxs)(v,{href:e,children:[(0,j.jsxs)(x.A,{as:"h2",className:(0,o.A)("text--truncate",g.cardTitle),title:i,children:[n," ",i]}),r&&(0,j.jsx)("p",{className:(0,o.A)("text--truncate",g.cardDescription),title:r,children:r})]})}function w({item:e}){const n=(0,s.Nr)(e),i=function(){const{selectMessage:e}=p();return n=>e(n,(0,m.T)({message:"1 item|{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:n}))}();return n?(0,j.jsx)(f,{href:n,icon:"\ud83d\uddc3\ufe0f",title:e.label,description:e.description??i(e.items.length)}):null}function C({item:e}){const n=(0,u.A)(e.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",i=(0,s.cC)(e.docId??void 0);return(0,j.jsx)(f,{href:e.href,icon:n,title:e.label,description:e.description??i?.description})}function b({item:e}){switch(e.type){case"link":return(0,j.jsx)(C,{item:e});case"category":return(0,j.jsx)(w,{item:e});default:throw new Error(`unknown item type ${JSON.stringify(e)}`)}}}}]);