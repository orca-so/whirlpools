"use strict";(self.webpackChunk_orca_so_whirlpools_docs=self.webpackChunk_orca_so_whirlpools_docs||[]).push([[730],{1184:(e,i,o)=>{o.d(i,{R:()=>r,x:()=>a});var t=o(4041);const n={},s=t.createContext(n);function r(e){const i=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),t.createElement(s.Provider,{value:i},e.children)}},6518:(e,i,o)=>{o.r(i),o.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Architecture Overview/Tokenized Positions","title":"Tokenized Positions","description":"Tokenized Positions","source":"@site/docs/02-Architecture Overview/04-Tokenized Positions.md","sourceDirName":"02-Architecture Overview","slug":"/Architecture Overview/Tokenized Positions","permalink":"/Architecture Overview/Tokenized Positions","draft":false,"unlisted":false,"editUrl":"https://github.com/orca-so/whirlpools/tree/main/docs/whirlpool/docs/02-Architecture Overview/04-Tokenized Positions.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"sidebar","previous":{"title":"Understanding Tick Arrays","permalink":"/Architecture Overview/Understanding Tick Arrays"},"next":{"title":"Understanding Whirlpool Fees","permalink":"/Architecture Overview/Whirlpool Fees"}}');var n=o(1085),s=o(1184);const r={},a=void 0,l={},c=[{value:"Tokenized Positions",id:"tokenized-positions",level:2},{value:"Anatomy of a Position",id:"anatomy-of-a-position",level:2},{value:"Creating a Position",id:"creating-a-position",level:3},{value:"Traits of a Whirlpool Position",id:"traits-of-a-whirlpool-position",level:2},{value:"NFT Metadata",id:"nft-metadata",level:2}];function d(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h2,{id:"tokenized-positions",children:"Tokenized Positions"}),"\n",(0,n.jsx)(i.p,{children:"Whirlpool Position ownership is represented by a non-fungible token in the owner's wallet."}),"\n",(0,n.jsx)(i.h2,{id:"anatomy-of-a-position",children:"Anatomy of a Position"}),"\n",(0,n.jsx)(i.p,{children:"There are 3 main accounts used to represent a Tokenized Position on Whirlpool."}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Postion Account"})," - The actual ",(0,n.jsx)(i.a,{href:"https://github.com/orca-so/whirlpools/blob/2c9366a74edc9fefd10caa3de28ba8a06d03fc1e/programs/whirlpool/src/state/position.rs#L20",children:"account"})," hosting the position's information. The PDA is derived from Whirlpool Program Id and Position Mint."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Position Mint Account"})," - The spl-token mint of the NFT minted to represent this position."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Position Associated Token Account"})," - The ",(0,n.jsx)(i.a,{href:"https://spl.solana.com/associated-token-account",children:"ATA"})," of the mint-token that will house the minted token in the user's wallet."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"The program will verify that a user owns a position by checking whether the wallet provided has the correct position token in it."}),"\n",(0,n.jsx)(i.h3,{id:"creating-a-position",children:"Creating a Position"}),"\n",(0,n.jsxs)(i.p,{children:["Positions are created using the ",(0,n.jsx)(i.a,{href:"https://github.com/orca-so/whirlpools/blob/main/programs/whirlpool/src/instructions/open_position_with_token_extensions.rs",children:"open_position_with_token_extensions"})," instruction and it does the following:"]}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["The caller will provide a brand new token mint and the PDA of the ",(0,n.jsx)(i.a,{href:"https://github.com/orca-so/whirlpools/blob/2c9366a74edc9fefd10caa3de28ba8a06d03fc1e/programs/whirlpool/src/state/position.rs",children:"Position"})," account derived from the Whirlpool."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"open_position_with_token_extensions"})," will initialize the mint, mint 1 token to the ",(0,n.jsx)(i.code,{children:"position_token_account"})," and immediately burn the mint authority of this mint."]}),"\n",(0,n.jsxs)(i.li,{children:["The position account is initialized with the set tick range and is ready to receive new liquidity via the ",(0,n.jsx)(i.a,{href:"https://github.com/orca-so/whirlpools/blob/2c9366a74edc9fefd10caa3de28ba8a06d03fc1e/programs/whirlpool/src/instructions/increase_liquidity.rs",children:"increase_liquidity"})," instruction."]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"traits-of-a-whirlpool-position",children:"Traits of a Whirlpool Position"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"The tick range is fixed upon creation and cannot be adjusted afterward. To re-balance, users need to close their position and open a new one with the desired tick range."}),"\n",(0,n.jsx)(i.li,{children:"Position tokens can be freely transferred. Whoever holds the token in their wallet has the authority to manage the position account, allowing them to increase or decrease liquidity, harvest fees, and close the position."}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"nft-metadata",children:"NFT Metadata"}),"\n",(0,n.jsx)(i.p,{children:"Whirlpools utilizes the Token2022 program for position NFTs, leveraging the MetadataPointer and TokenMetadata extensions to make all rent refundable. Advanced users can also choose to exclude metadata entirely."})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);